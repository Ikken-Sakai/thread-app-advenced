# thread App（社内コミュニケーション用スレッドアプリ） - 応用課題

## 概要
このプロジェクトは、**社内コミュニケーション用スレッドアプリ**の応用課題として取り組むプロジェクトです。  
現在は基本的な機能（ログイン、スレッド作成、返信、編集・削除）を実装した状態ですが、  
**コードの整理、ライブラリやフレームワークの使用、拡張機能の追加**をこれから行っていきます。

PHP / MySQL / JavaScript（Fetch API）を使用し、XAMPP環境で動作します。  
Gitによるソース管理を行い、BacklogおよびGitHubと連携しています。

<img width="743" height="408" alt="Image" src="https://github.com/user-attachments/assets/1c9f8b8a-293d-40e0-95b8-b6badfe19cf8" />

---

## 現在の実装状況

### 使用技術
| 分類 | 内容 |
|------|------|
| 言語 | PHP / JavaScript / SQL |
| データベース | MySQL |
| 環境 | XAMPP / VS Code |
| バージョン管理 | Git（Backlog・GitHub 連携） |

### 実装済み機能
- ユーザー登録・ログイン / ログアウト  
- スレッド一覧表示  
- 新規スレッド作成  
- 投稿への返信（階層構造）  
- 投稿の編集・削除（本人のみ可能）  
- プロフィール一覧閲覧機能
- プロフィール編集機能（本人のみ可能）
- ページング・ソート機能  
- セッション管理によるアクセス制御  
- UIデザイン（CSSによる最終調整）

### 現在の画面構成
| ファイル名 | 役割 |
|-------------|------|
| `login.php` | ログインページ |
| `logout.php` | ログアウト処理 |
| `register.php` | 新規登録ページ |
| `thread_list.php` | スレッド一覧表示 |
| `new_thread.php` | 新規スレッド投稿フォーム |
| `edit_post.php` | 投稿編集ページ |
| `profile_list.php` | ユーザーのプロフィール一覧を閲覧 |
| `edit_profile.php` | ユーザーのプロフィールを編集 |
| `api.php` | 各種APIエンドポイント |
| `db.php` | データベース接続設定 |

### 現在のディレクトリ構成
```
thread_app_advanced/
├── api.php
├── db.php
├── db.php.example
├── edit_post.php
├── thread_list.php
├── auth.php
├── login.php
├── logout.php
├── new_thread.php
├── register.php
├── profile_list.php 
├── edit_profile.php
├── style_*.css
├── .gitignore
└── README.md
```

---

## セットアップ手順

### 1. リポジトリのクローン
```bash
git clone https://github.com/Ikken-Sakai/thread_app_advanced.git
cd thread_app_advanced
```

### 2. データベース設定
1. `db.php.example`を`db.php`にコピー
   ```bash
   copy db.php.example db.php
   ```
   （Linux/Macの場合: `cp db.php.example db.php`）

2. `db.php`を開き、データベース接続情報を環境に合わせて編集
   - `$dsn`: データベース名を変更（デフォルト: `chat_app`）
   - `$db_user`: MySQLユーザー名（デフォルト: `root`）
   - `$db_pass`: MySQLパスワード（XAMPPのデフォルトは空欄）

### 3. データベースの作成
MySQLで以下のSQLを実行してデータベースとテーブルを作成：
```sql
CREATE DATABASE chat_app CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE chat_app;
-- テーブル作成SQLを実行（プロジェクト内のSQLファイルを参照）
```

### 4. XAMPPの起動
- XAMPPコントロールパネルでApacheとMySQLを起動
- ブラウザで `http://localhost/thread_app_advanced/` にアクセス

---

## GitHub連携

このプロジェクトはGitHubで管理されています。

### リポジトリへの接続
```bash
# リモートリポジトリの追加（初回のみ）
git remote add origin https://github.com/Ikken-Sakai/thread_app_advanced.git

# ブランチ名をmainに設定
git branch -M main

# 初回プッシュ
git push -u origin main
```

### 通常の作業フロー
```bash
# 変更を確認
git status

# 変更をステージング
git add .

# コミット
git commit -m "コミットメッセージ"

# プッシュ
git push
```

### 注意事項
- `db.php`は`.gitignore`に含まれているため、GitHubにはアップロードされません
- 機密情報（パスワード、APIキーなど）はリポジトリにコミットしないでください
- 新しい環境でセットアップする際は、`db.php.example`をコピーして設定してください

---

## 応用課題：今後の改善計画

このプロジェクトでは、以下の3つの主要な応用課題に取り組み、アプリケーションの品質向上と機能拡張を目指します。

### 1. コードの整理

#### 1.1 リファクタリング
- **重複コードの削減**: 共通処理の関数化・クラス化
- **命名規則の統一**: 変数名・関数名の一貫性確保
- **コード分割**: 大きなファイルの機能別分割
- **DRY原則の適用**: Don't Repeat Yourself原則に基づくコード最適化

#### 1.2 設計パターンの導入
- **MVCパターン**: Model-View-Controllerによる責務分離
- **リポジトリパターン**: データアクセス層の抽象化
- **サービス層の追加**: ビジネスロジックの分離
- **依存性注入**: テスタビリティと保守性の向上

#### 1.3 エラーハンドリングの強化
- **統一的なエラー処理**: エラーレスポンスの標準化
- **例外処理の実装**: try-catchによる適切な例外処理
- **ログ機能の追加**: エラーログの記録と分析
- **ユーザーフレンドリーなエラーメッセージ**: 分かりやすいエラー表示

#### 1.4 コメント・ドキュメントの充実
- **PHPDocの追加**: 関数・クラスのドキュメント化
- **READMEの詳細化**: セットアップ手順や使用方法の明記
- **コードコメントの最適化**: 必要な箇所への適切なコメント追加

---

### 2. ライブラリやフレームワークの使用

#### 2.1 PHPフレームワークの導入
- **Laravel**: モダンなPHPフレームワークによる開発効率化
  - Eloquent ORMによるデータベース操作の簡素化
  - Bladeテンプレートエンジンによるビュー管理
  - ルーティング、ミドルウェア、認証機能の活用
- **またはSymfony**: コンポーネントベースのフレームワーク
- **Composer**: 依存関係管理ツールの導入

#### 2.2 フロントエンドフレームワーク
- **Vue.js**: リアクティブなUI構築
  - コンポーネントベースの開発
  - 状態管理（Vuex/Pinia）
- **またはReact**: 仮想DOMによる効率的なUI更新
- **TypeScript**: 型安全性の向上

#### 2.3 CSSフレームワーク・ライブラリ
- **Bootstrap**: レスポンシブデザインの実装
- **またはTailwind CSS**: ユーティリティファーストのCSS
- **Sass/SCSS**: CSSの拡張機能によるスタイリング効率化

#### 2.4 データベース関連
- **ORM（Object-Relational Mapping）**: 
  - Eloquent（Laravel）
  - Doctrine（Symfony）
  - 生のSQLクエリからの移行による保守性向上

#### 2.5 認証・セキュリティライブラリ
- **認証ライブラリ**: JWT（JSON Web Token）による認証
- **パスワードハッシュ**: bcrypt/Argon2の適切な使用
- **CSRF保護**: トークンベースの保護
- **XSS対策**: 入力値のサニタイズ

#### 2.6 その他の有用なライブラリ
- **バリデーションライブラリ**: 入力値検証の標準化
- **HTTPクライアント**: Guzzleなどによる外部API連携
- **テストフレームワーク**: PHPUnitによる単体テスト・統合テスト

---

### 3. 拡張機能の追加

#### 3.1 リアルタイム通信機能
- **WebSocket**: Socket.ioやRatchetを使用したリアルタイム通知
- **プッシュ通知**: 新着メッセージやメンションの即時通知
- **オンライン状態表示**: ユーザーのオンライン/オフライン状態

#### 3.2 ファイル・メディア機能
- **ファイルアップロード**: 画像・PDF・ドキュメントの添付機能
- **画像プレビュー**: アップロード画像のサムネイル表示
- **ファイル管理**: アップロードファイルの整理・削除機能

#### 3.3 検索・フィルタリング機能
- **全文検索**: スレッド・投稿内容の検索機能
- **高度なフィルタリング**: 日付、ユーザー、タグによる絞り込み
- **検索履歴**: よく検索されるキーワードの保存

#### 3.4 ソーシャル機能
- **いいね機能**: 投稿へのリアクション機能
- **ブックマーク**: お気に入りスレッドの保存
- **フォロー機能**: ユーザー間のフォロー/フォロワー関係
- **メンション機能**: @ユーザー名による通知

#### 3.5 通知機能
- **通知センター**: 一元的な通知管理画面
- **メール通知**: 重要な更新のメール通知
- **通知設定**: ユーザーごとの通知カスタマイズ

#### 3.6 管理者機能
- **ユーザー管理**: ユーザーの一覧・編集・削除
- **コンテンツ管理**: 不適切な投稿の削除・編集
- **統計ダッシュボード**: アクティビティの可視化
- **ログ管理**: システムログの閲覧・分析

#### 3.7 API化・フロントエンド分離
- **RESTful API**: 標準的なAPI設計によるフロントエンド分離
- **API認証**: OAuth2やJWTによる認証
- **APIドキュメント**: Swagger/OpenAPIによるAPI仕様書
- **SPA（Single Page Application）**: シングルページアプリケーション化

#### 3.8 その他の拡張機能
- **多言語対応**: 国際化（i18n）の実装
- **ダークモード**: UIテーマの切り替え
- **エクスポート機能**: スレッド内容のCSV/PDF出力
- **バックアップ機能**: データの自動バックアップ

---

## 開発スケジュール（予定）

1. **フェーズ1: コードの整理**
   - リファクタリングと設計パターンの導入
   - エラーハンドリングの強化

2. **フェーズ2: フレームワーク導入**
   - PHPフレームワークの選定と導入
   - フロントエンドフレームワークの導入

3. **フェーズ3: 拡張機能の実装**
   - 優先度の高い機能から順次実装
   - テストとデバッグ

---

## 作者情報

**Ikken Sakai**

東京国際工科専門職大学 工科学部 情報工学科 AI戦略コース 3年

Email: ike.sakai.35@gmail.com

GitHub: Ikken-Sakai

---

## ライセンス

このプロジェクトは学習・研究目的で作成されたものであり、  
無断商用利用を禁止します。
